schema_version: 1
id: "evt002"
issue_id: null
created_at: "2026-02-13T21:00:00Z"
author_role: "structural_arch"
confidence: "high"

title: "Fragile Resource Management in AnsiblePaths Service"
statement: |
  The `AnsiblePaths` service relies on `__del__` to clean up the `importlib.resources.as_file` context manager, which handles temporary directories for package resources. Python's `__del__` is not guaranteed to be called (e.g., during interpreter shutdown or circular references), leading to potential resource leaks or errors. Resource lifecycle should be explicit (e.g., via a context manager protocol on the service itself) or handled by the container.

evidence:
  - path: "src/menv/services/ansible_paths.py"
    snippet: |
      def __del__(self) -> None:
          """Clean up the context manager on deletion."""
          if self._ansible_dir_context is not None:
              self._ansible_dir_context.__exit__(None, None, None)

tags: ["resource-management", "lifecycle", "fragile-implementation"]
