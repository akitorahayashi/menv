schema_version: 1

# Metadata
id: "ur5m2k"
issue_id: ""
created_at: "2026-01-31"
author_role: "pythonista"
confidence: "medium"

# Content
title: "Unsafe resource management in AnsiblePaths"
statement: |
  `AnsiblePaths` relies on `__del__` to clean up the `as_file` context manager context.
  `__del__` is not guaranteed to be called, potentially leaving temporary files or resources leaking.
  Resource management should be explicit via context managers (`__enter__`/`__exit__`) or a dedicated shutdown method.

evidence:
  - path: "src/menv/services/ansible_paths.py"
    loc:
      - "42"
    note: "Use of `__del__` for resource cleanup is an anti-pattern in Python."
  - path: "src/menv/services/ansible_paths.py"
    loc:
      - "38"
    note: "Context manager `as_file` is kept alive by instance state, making lifecycle management implicit."

tags:
  - "anti-pattern"
  - "resource-management"
  - "python-idioms"
