schema_version: 1

# Metadata
id: "ev1a2b"
issue_id: "a2n3ru"
created_at: "2024-05-23"
author_role: "pythonista"
confidence: "high"

# Content
title: "Unsafe resource cleanup using __del__ in AnsiblePaths"
statement: |
  The `AnsiblePaths` service uses `__del__` to clean up temporary resources (context managers), which is unreliable and swallows exceptions.
  `__del__` is not guaranteed to be called by the interpreter, and exceptions raised within it are ignored.
  The class should implement the context manager protocol (`__enter__`/`__exit__`) or an explicit `close()` method.

# Evidence supporting the observation
evidence:
  - path: "src/menv/services/ansible_paths.py"
    loc:
      - "42-48"
    note: "__del__ implementation swallows exceptions and attempts cleanup unreliably."

tags:
  - "anti-pattern"
  - "resource-management"
  - "python"
