schema_version: 1

# Metadata
id: "a1b2c3"
issue_id: "svc3m8"
created_at: "2026-02-04"
author_role: "data_arch"
confidence: "high"

# Content
title: "Manual TOML serialization creates invalid state risk"
statement: |
  The ConfigStorage service manually constructs TOML output using string formatting instead of using a serialization library. This is inefficient and prone to generating invalid configuration files if escaping is not handled perfectly for all edge cases.

# Evidence supporting the observation
evidence:
  - path: "src/menv/services/config_storage.py"
    loc:
      - "save"
    note: "Method constructs TOML by manually concatenating strings with explicit escaping logic."

tags:
  - "data-integrity"
  - "anti-pattern"
  - "security"
